<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 쿼리작성해서 db에 보내고 결과 까지 받는 장소 -->
<mapper namespace="employee">

	<insert id="insertEmployee" parameterType="com.hb.employee.EmployeeVO">
		insert into EMPLOYEE values(
		#{id},#{password},#{name},#{email},#{address},#{departmentID},
		#{position},#{cellPhone},#{phone},#{birth},#{profile},SYSDATE)
	</insert>
	
	<update id="updateEmployee" parameterType="com.hb.employee.EmployeeVO">
		update EMPLOYEE 
		set password = #{password}, email=#{email}, address = #{address}, departmentID = #{departmentID}, 
			name =#{name}, position=#{position}, cellPhone=#{cellPhone}, phone=${phone}, birth =#{birth}, profile=#{profile}
		where id = #{id}
	</update>
	
	<delete id="deleteEmployee" parameterType="String">
		delete from EMPLOYEE where id = #{id} 
	</delete>
	
	<!-- <select id="loginCheck" parameterType="com.hb.employee.EmployeeVO" resultType="com.hb.employee.EmployeeVO">
		select * from EMPLOYEE where id = #{id} and password =#{password}
	</select> -->
	
	<select id="loginCheck" parameterType="com.hb.employee.EmployeeVO" resultType="com.hb.employee.EmpViewVO">
		select * from emp_view where id=#{id} and password = #{password}
	</select>
	
	<select id="insert_idCheck" parameterType="String" resultType="int">
		select count(id) from EMPLOYEE where id = #{id} 
	</select>
	
	<!-- 
		//////////////////////////////////////////////////////////////////////////////////
	 -->
	
	<insert id="insertAR" parameterType="com.hb.employee.AttendanceRecordVO">
		insert into AttendanceRecord values(AR_SEQ.nextval, #{id}, #{ar_Date}, to_char(SYSDATE, 'HH24:MI:SS'), '00:00:00',null, #{ip})
	</insert>
	
	<update id="updateAR" parameterType="com.hb.employee.AttendanceRecordVO">
		update AttendanceRecord
		set startTime = #{startTime}, endTime = #{endTime}, workTime = #{workTime}, ip = #{ip}
		where ar_No = #{ar_No}
	</update>
	
	<select id="checkTodayRecord" parameterType="com.hb.employee.AttendanceRecordVO" resultType="com.hb.employee.AttendanceRecordVO">
		select * from AttendanceRecord where id =#{id} and ar_Date=#{ar_Date}
	</select>
	

</mapper>










